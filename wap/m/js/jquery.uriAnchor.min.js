!function(a){a.uriAnchor=function(){var b,c,d,e,f,g,h,i,a={regex_anchor_clean1:/^[#!]*/,regex_anchor_clean2:/\?[^?]*$/,settable_map_key:{schema_map:!0},schema_map:null};return b=function(a){var b=new Error;return b.name="Anchor Schema Reject",b.message=a,b},c=function(a){return void 0===a?"Undefined":null===a?"Null":{}.toString.call(a).slice(8,-1)},d=function(){return String(document.location.hash).replace(a.regex_anchor_clean1,"").replace(a.regex_anchor_clean2,"")},e=function(a){var f,g,h,b=a.input_string||"",c=a.delimit_char||"&",d=a.delimit_kv_char||"=",e={};for(f=b.split(c),g=0;g<f.length;g++)h=f[g].split(d),1===h.length?e[decodeURIComponent(h[0])]=!0:2===h.length&&(e[decodeURIComponent(h[0])]=decodeURIComponent(h[1]));return e},f=function(d,e){var o,p,q,r,s,t,u,v,w,x,y,z,A,f=d||{},g=e||{},h=g.delimit_char||"&",i=g.delimit_kv_char||"=",j=g.sub_delimit_char||":",k=g.dep_delimit_char||"|",l=g.dep_kv_delimit_char||",",m=a.schema_map,n=[];if("Object"!==c(f))return!1;for(r in f)if(f.hasOwnProperty(r)){if(!r)continue;if(0===r.indexOf("_"))continue;if(m&&!m[r])throw b("Independent key |"+r+"| not authorized by anchor schema");if(u="",s=f[r],void 0===s&&(s=""),t=c(s),m&&(o=m[r],"Object"===c(o)&&!o[String(s)]))throw b("Independent key-value pair |"+r+"|"+String(s)+"| not authorized by anchor schema");if("Boolean"===t?s&&(u+=encodeURIComponent(r)):u+=encodeURIComponent(r)+i+encodeURIComponent(s),v="_"+r,f.hasOwnProperty(v)){if(w=f[v],A=[],m){if(p=m[v],!p)throw b("Dependent key |"+v+"| not authorized by anchor schema")}else p=null;for(x in w)if(w.hasOwnProperty(x)){if(y=w[x],z=c(y),p&&(q=p[x],"Object"===c(q)&&!q[String(y)]))throw b("Dependent key-value pair |"+x+"|"+String(y)+"| not authorized by anchor schema");"Boolean"===t?y===!0&&A.push(encodeURIComponent(x)):A.push(encodeURIComponent(x)+l+encodeURIComponent(y))}A.length>0&&(u+=j+A.join(k))}n.push(u)}return n.join(h)},g=function(a,b,c){var e,g,d=f(a,b);return e=document.location.href.split("#",2),g=d?e[0]+"#!"+d:e[0],c?(d?document.location.replace(e[0]+"#!"+d):document.location.replace(e[0]),!0):(document.location.href=g,void 0)},h=function(){var b,f,g,h,i,j,a=d();if(""===a)return{};b=e({input_string:a,delimit_char:"&",delimit_kv_char:"="}),g=[];for(h in b)b.hasOwnProperty(h)&&g.push(h);for(f=0;f<g.length;f++)h=g[f],i=b[h],"String"===c(i)&&""!==h&&(b["_s_"+h]=i,j=i.split(":"),j[1]&&""!==j[1]&&(b[h]=j[0],b["_"+h]=e({input_string:j[1],delimit_char:"|",delimit_kv_char:","})));return b},i=function(b){var d,e,c=a.settable_map_key;for(d in b)if(b.hasOwnProperty(d)){if(!c.hasOwnProperty(d))throw e=new Error,e.name="Bad Input",e.message="Setting config key |"+d+"| is not supported",e;a[d]=b[d]}},{configModule:i,getVarType:c,makeAnchorMap:h,makeAnchorString:f,setAnchor:g}}()}(jQuery);